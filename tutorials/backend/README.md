
# –ú–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏–µ —É–∫–∞–∑–∞–Ω–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é –±—ç–∫–µ–Ω–¥–∞ –Ω–∞ JavaScript

## –ü–ª–∞–Ω

1. –ß—Ç–æ —Ç–∞–∫–æ–µ Node.js?
2. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Node.js –∏ —Å–ø–æ—Å–æ–±—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ production-—Å—Ä–µ–¥–µ
3. –ù–µ–±–æ–ª—å—à–∏–µ –ø—Ä–∏–º–µ—Ä—ã —Å–∫—Ä–∏–ø—Ç–æ–≤
4. –ü–∏—à–µ–º API —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø–∞–∫–µ—Ç–∞ http
5. –ü–∏—à–µ–º API –Ω–∞ express
6. –î–æ–±–∞–≤–ª—è–µ–º –≤ –ø—Ä–æ–µ–∫—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–º –∫–æ–¥)
7. –î–æ–±–∞–≤–ª—è–µ–º –≤–Ω–µ—à–Ω–∏–π –∫–ª–∏–µ–Ω—Ç (—Ç–æ —Å–∞–º–æ–µ BFF)
8. –ß—Ç–æ –µ—â–µ —É–º–µ–µ—Ç Node.js

## 1. –ß—Ç–æ —Ç–∞–∫–æ–µ Node.js

Node.js (Node) ‚Äî —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —è–∑—ã–∫–æ–º JavaScript –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –Ω–∞ –¥–≤–∏–∂–∫–µ Chrome V8. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–¥ –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–≥—Ä–∞–º–º –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. –í –æ—Å–Ω–æ–≤–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã ‚Äî —Å–æ–±—ã—Ç–∏–π–Ω–æ-—É–ø—Ä–∞–≤–ª—è–µ–º–∞—è –º–æ–¥–µ–ª—å —Å –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π –∏ –ª–µ–≥–∫–æ–π.

### –ì–ª–∞–≤–Ω—ã–π –º–∏–Ω—É—Å Node.js

–ë–µ–∑—É—Å–ª–æ–≤–Ω–æ –Ω–∞ Node.js –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è/—Å–µ—Ä–≤–∏—Å—ã, –Ω–æ –≤—Å–µ —ç—Ç–æ –±—É–¥–µ—Ç —É–ø–∏—Ä–∞—Ç—å—Å—è –≤ –Ω–∏–∑–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. Node.js –æ–¥–Ω–æ–ø–æ—Ç–æ—á–Ω–∞, —ç—Ç–æ –µ–≥–æ –≥–ª–∞–≤–Ω—ã–π –º–∏–Ω—É—Å, –ø–æ—ç—Ç–æ–º—É –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á —Ö–∞–π–ª–æ–∞–¥–∞, –Ω–æ–¥–∞ –Ω–µ –ø–æ–¥–æ–π–¥–µ—Ç.

## 2. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Node.js –∏ —Å–ø–æ—Å–æ–±—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –≤ production-—Å—Ä–µ–¥–µ

-   **–í–µ–±-—Å–µ—Ä–≤–µ—Ä—ã:**  
    Node.js —à–∏—Ä–æ–∫–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞–∫ –ø—Ä–æ—Å—Ç—ã—Ö, —Ç–∞–∫ –∏ –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏, –∫–∞–∫ Netflix, LinkedIn –∏ Walmart, –∏—Å–ø–æ–ª—å–∑—É—é—Ç Node.js –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ —Å–≤–æ–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
    
-   **API-—Å–µ—Ä–≤–µ—Ä—ã:**  
    –ë–ª–∞–≥–æ–¥–∞—Ä—è –ª–µ–≥–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Express –∏ Fastify, Node.js —è–≤–ª—è–µ—Ç—Å—è –æ—Ç–ª–∏—á–Ω—ã–º –≤—ã–±–æ—Ä–æ–º –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è RESTful –∏ GraphQL API.
    
-   **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è real-time –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:**  
    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ WebSocket –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫, —Ç–∞–∫–∏—Ö –∫–∞–∫ Socket.IO, –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —á–∞—Ç—ã, —Å–∏—Å—Ç–µ–º—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∏ –æ–Ω–ª–∞–π–Ω-–∏–≥—Ä—ã —Å –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π.
    
-   **–ü–æ—Ç–æ–∫–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**  
    –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö (stream processing), –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –≤–∏–¥–µ–æ—Å—Ç—Ä–∏–º–∏–Ω–≥–µ –∏–ª–∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö.
    
-   **–î–µ—Å–∫—Ç–æ–ø–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**  
    –° –ø–æ–º–æ—â—å—é Electron –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫—Ä–æ—Å—Å-–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ –¥–µ—Å–∫—Ç–æ–ø–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–∞–∫–∏–µ –∫–∞–∫ Visual Studio Code –∏ Slack.
    
-   **–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**  
    Node.js –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å React Native –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –º–æ–±–∏–ª—å–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å –æ–±—â–µ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑–æ–π –¥–ª—è iOS –∏ Android.
    
-   **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Å–º–∞—Ä—Ç-–¢–í:**  
    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Svelte –∏ Node.js –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ç–µ–ª–µ–≤–∏–∑–∏–æ–Ω–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º –∏ –º—É–ª—å—Ç–∏–º–µ–¥–∏–π–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –ö–æ–º–ø–∞–Ω–∏—è Smart –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Svelte –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ–¥ Smart TV.
    
-   **Serverless-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**  
    Node.js –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –≤ —Ä–∞–º–∫–∞—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º FaaS (Function as a Service), —Ç–∞–∫–∏—Ö –∫–∞–∫ AWS Lambda, Google Cloud Functions –∏ Azure Functions.
    
-   **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã:**  
    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Node.js —É–ø—Ä–æ—â–∞–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è –∞–≤—Ç–æ–Ω–æ–º–Ω–æ.
    
-   **DevOps –∏ —É—Ç–∏–ª–∏—Ç—ã:**  
    Node.js –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –¥–µ–ø–ª–æ—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —Ç–∏–ø–∞ Gulp –∏ Webpack.

## 3. –ù–µ–±–æ–ª—å—à–∏–µ –ø—Ä–∏–º–µ—Ä—ã —Å–∫—Ä–∏–ø—Ç–æ–≤

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤ —Å–∫—Ä–∏–ø—Ç–æ–≤, —á—Ç–æ–±—ã –ø–æ–ø–æ–¥—Ä–æ–±–Ω–µ–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å, –∫–∞–∫ –∏–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç Node.js.

```js
const {writeFileSync, readFileSync} = require('fs');
const path = require('path');

function doMusic() {
	return 'listen to radiohead, guys';
}

writeFileSync(path.join(__dirname, 'wisdom-book.txt'), doMusic());
```

–ö–∞–∫ –º—ã –≤–∏–¥–∏–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∏–¥–µ–Ω—Ç–∏—á–µ–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É –æ–±—ã—á–Ω–æ–≥–æ javascript.
–í Node.js –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ CommonJS. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –ø—Ä–æ –º–æ–¥—É–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å [–∑–¥–µ—Å—å](https://habr.com/ru/company/nix/blog/261141/).

–ï—â–µ –ø—Ä–∏–º–µ—Ä:

```js
const readline = require('readline');

const rl = readline.createInterface({
  input: process.stdin,
  output: process.stdout,
  terminal: false
});

function countNumbers(str){
    let count = 0;
    for (let i = 0; i < str.length; ++i) {
        if (!Number.isNaN(Number.parseInt(str))) {
            count++;
        }
    }

    return count;
}


rl.once('line', (line) => {
    console.log(countNumbers(line));

    rl.close();
});
```

–°–∫—Ä–∏–ø—Ç –≤—ã—à–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É –∏–∑ –≤–≤–æ–¥–∞ –∫–æ–Ω—Å–æ–ª–∏ –∏ –≤—ã–≤–æ–¥–∏—Ç —Å–∫–æ–ª—å–∫–æ –≤ –Ω–µ–π —Ü–∏—Ñ—Ä.

–£ Node.js –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫, –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ –º—ã –≤–∏–¥–∏–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É `readline` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–≤–æ–¥–æ–º/–≤—ã–≤–æ–¥–æ–º.
–í –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä—ã –º—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `fs` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π.

## 4. –ü–∏—à–µ–º API —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø–∞–∫–µ—Ç–∞ http

–í Node.js –µ—Å—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è http-—Å–µ—Ä–≤–µ—Ä–∞.

–°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª `server.js` –∏ –ø–æ–¥–∫–ª—é—á–∏–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É
```js
// /server.js
const http = require("http");
```

–î–∞–ª–µ–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª—è–µ–º –Ω–∞ –∫–∞–∫–æ–º —Ö–æ—Å—Ç–µ –∏ –ø–æ—Ä—Ç–µ –±—É–¥–µ—Ç –∫—Ä—É—Ç–∏—Ç—å—Å—è –Ω–∞—à —Å–µ—Ä–≤–µ—Ä.
–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –Ω–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –∏ 8000 –ø–æ—Ä—Ç:
```js
// /server.js
const HOST = 'localhost';
const PORT = 8000;
```

–¢–µ–ø–µ—Ä—å –æ–±—ä—è–≤–∏–º —Ñ—É–Ω–∫—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –æ—Ç–≤–µ—Ç—ã.
–£ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç: –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ `req` - http-–∑–∞–ø—Ä–æ—Å, `res` - http-–æ—Ç–≤–µ—Ç.
–í –ø—Ä–∏–º–µ—Ä–µ –≤–Ω–∏–∑—É –Ω–∞—à –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞ –ª—é–±–æ–π –∑–∞–ø—Ä–æ—Å –æ—Ç–¥–∞–µ—Ç —Å—Ç–∞—Ç—É—Å `200 –û–ö` –∏ –≤ —Ç–µ–ª–µ –æ—Ç–≤–µ—Ç `–ö—É—Ä—Å –ü–°–ü —Ç–∞–∫–æ–π –∫—Ä—É—Ç–æ–π!`.
```js
// /server.js
const handler = (req, res) => {
    res.writeHead(200);
    res.end('–ö—É—Ä—Å –ü–°–ü —Ç–∞–∫–æ–π –∫—Ä—É—Ç–æ–π!');
};
```

–ù–∞–∫–æ–Ω–µ—Ü –æ–±—ä—è–≤–∏–º —Å–µ—Ä–≤–µ—Ä –∏ –∑–∞–∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –Ω–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏—é –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```js
// /server.js
const server = http.createServer(handler);
server.listen(PORT, HOST, () => {
    console.log(`–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://${host}:${port}`);
});
```

–ò—Ç–æ–≥–æ –ø–æ–ª—É—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç:

```js
// /server.js
const http = require("http");

const HOST = 'localhost';
const PORT = 8000;

const handler = (req, res) => {
    res.writeHead(200);
    res.end('–ö—É—Ä—Å –ü–°–ü —Ç–∞–∫–æ–π –∫—Ä—É—Ç–æ–π!');
};

const server = http.createServer(handler);
server.listen(PORT, HOST, () => {
    console.log(`–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://${host}:${port}`);
});
```

–ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞—à —Å–µ—Ä–≤–µ—Ä –∫–æ–º–∞–Ω–¥–æ–π:

```shell
node server.js
```

–í–∏–¥–∏–º, –≤ –∫–æ–Ω—Å–æ–ª–∏ –≤—ã–≤–æ–¥:

`–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://localhost:8000`

–ò –¥–∞–ª–µ–µ –∫–æ–Ω—Å–æ–ª—å –∑–∞–≤–∏—Å–∞–µ—Ç. –í —ç—Ç–æ–º –ø—Ä–æ—Ü–µ—Å—Å–µ –Ω–∞—á–∏–Ω–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ —Å–ª—É—à–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–∞—à http-—Å–µ—Ä–≤–µ—Ä.
–û—Ç–∫—Ä–æ–µ–º –Ω–æ–≤–æ–µ –æ–∫–Ω–æ –∫–æ–Ω—Å–æ–ª–∏ (–Ω–µ –∑–∞–∫—Ä—ã–≤–∞—è –ø—Ä–µ–¥—ã–¥—É—â–µ–µ) –∏ –ø–∏—à–µ–º:

```shell
curl http://localhost:8000
```

–ò –≤–∏–¥–∏–º –æ—Ç–≤–µ—Ç:
```shell
–ö—É—Ä—Å –ü–°–ü —Ç–∞–∫–æ–π –∫—Ä—É—Ç–æ–π!
```

–ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –í—ã –Ω–∞–ø–∏—Å–∞–ª–∏ —Å–≤–æ–π http-—Å–µ—Ä–≤–µ—Ä –Ω–∞ node.js.

## 5. –ü–∏—à–µ–º API –Ω–∞ express

–í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞—Ö —É –Ω–∞—Å –±—ã–≤–∞–µ—Ç –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤,
–∏ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤—ã—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏. –î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–ø–∏—Å–∞–ª–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ `express`.

–¢.–∫. express —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –µ–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –∫–æ–º–∞–Ω–¥–æ–π:

```shell
npm i express
```

–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–ø–∏—à–µ–º —Å–∫—Ä–∏–ø—Ç –≤—ã—à–µ –∏ –ø–æ–ª—É—á–∏–º:

```js
const express = require('express');

const app = express(); // 1

const HOST = 'localhost';
const PORT = 8000;

const handler = (req, res) => {
    res.writeHead(200);
    res.end('–ü–°–ü —Ç–∞–∫–æ–π –∫—Ä—É—Ç–æ–π!');
};

app.all('*', handler); // 2

app.listen(PORT, HOST, () => { // 3
    console.log(`–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://${host}:${port}`);
});
```

–ü—Ä–æ–π–¥–µ–º—Å—è –ø–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º:
1. –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã –ø–æ –ª—é–±–æ–º—É –ø—É—Ç–∏ –±—É–¥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ `handler`
3. –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —É–±–µ—Ä–µ–º –ø–æ–º–µ—á–µ–Ω–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `// 2` —Å–æ–∑–¥–∞–¥–∏–º –ø–æ–±–æ–ª—å—à–µ —Ä–∞–∑–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤, –∏ –ø–æ—Ç–µ—Å—Ç–∏—Ä—É–µ–º –∏—Ö:

```js
app.get('/music', (req, res) => {
    res.end('–Ø —Å–ª—É—à–∞—é —Ç–æ–ª—å–∫–æ Radiohead!');
});

app.get('/course', (req, res) => {
    res.json({ course: '–ü–°–ü' });
});
```

–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –µ—Å—Ç—å 2 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø–æ 2-–º —Ä–∞–∑–Ω—ã–º –∞–¥—Ä–µ—Å–∞–º `/music` –∏ `/course`.

–ß—Ç–æ–±—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –µ–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:

- –¢–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (curl –∏–ª–∏ httpie)
- –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API ([Postman](https://learning.postman.com/docs/publishing-your-api/documenting-your-api/) –∏ [Insomnia](https://docs.insomnia.rest/insomnia/get-started))

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª—å–Ω—ã—Ö —É—Ç–∏–ª–∏—Ç:

curl:
```shell
$ curl http://localhost:8000/music

–Ø —Å–ª—É—à–∞—é —Ç–æ–ª—å–∫–æ Radiohead!

$ curl http://localhost:8000/course

{"course":"–ü–°–ü"}
```

httpie:
```shell
$ http GET http://localhost:8000/music

–Ø —Å–ª—É—à–∞—é —Ç–æ–ª—å–∫–æ Radiohead!

$ http GET http://localhost:8000/course

{"course": "–ü–°–ü"}
```

### API —Å –∞–∫—Ü–∏—è–º–∏ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ 3-4 –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç—ã

–í 3 –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–æ–π —Ä–∞–±–æ—Ç–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–∞–≤–∞–ª—Å—è –ø—Ä–∏–º–µ—Ä, –≥–¥–µ –¥–∞–Ω–Ω—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ —Ñ—É–Ω–∫—Ü–∏—è `getData()`.
–î–∞–≤–∞–π—Ç–µ –≤—ã–Ω–µ—Å–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∞ —Å –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏ –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å `fetch` –Ω–∞ –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞–º–∏ —Å–µ—Ä–≤–µ—Ä.

–°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª `stocks.json` —Ä—è–¥–æ–º —Å `server.js`. –≠—Ç–æ –±—É–¥–µ—Ç –Ω–∞—à–µ–π —Å–≤–æ–µ–æ–±—Ä–∞–∑–Ω–æ–π –±–∞–∑–æ–π-–¥–∞–Ω–Ω—ã—Ö. –ü–æ–º–µ—Å—Ç–∏–º —Ç—É–¥–∞ –≤–æ—Ç —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ:
```json
[
    {
        "id": 1,
        "src": "https://i.pinimg.com/originals/c9/ea/65/c9ea654eb3a7398b1f702c758c1c4206.jpg",
        "title": "–ê–∫—Ü–∏—è",
        "text": "–¢–∞–∫–æ–π –∞–∫—Ü–∏–∏ –≤—ã –µ—â–µ –Ω–µ –≤–∏–¥–µ–ª–∏ 1"
    },
    {
        "id": 2,
        "src": "https://i.pinimg.com/originals/c9/ea/65/c9ea654eb3a7398b1f702c758c1c4206.jpg",
        "title": "–ê–∫—Ü–∏—è",
        "text": "–¢–∞–∫–æ–π –∞–∫—Ü–∏–∏ –≤—ã –µ—â–µ –Ω–µ –≤–∏–¥–µ–ª–∏ 2"
    },
    {
        "id": 3,
        "src": "https://i.pinimg.com/originals/c9/ea/65/c9ea654eb3a7398b1f702c758c1c4206.jpg",
        "title": "–ê–∫—Ü–∏—è",
        "text": "–¢–∞–∫–æ–π –∞–∫—Ü–∏–∏ –≤—ã –µ—â–µ –Ω–µ –≤–∏–¥–µ–ª–∏ 3"
    }
]
```

–ò —Ç–µ–ø–µ—Ä—å —Å–æ–∑–¥–∞–¥–∏–º 2 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞: `/stocks` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∞–∫—Ü–∏–π, –∏ `/stock/:id` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–¥–Ω–æ–π –∞–∫—Ü–∏–∏ –ø–æ –µ–µ id.

–ß—Ç–æ–±—ã —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª–∞ –Ω–∞–ø–∏—à–µ–º —Ñ—É–Ω–∫—Ü–∏—é `readJson`, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç —á–∏—Ç–∞—Ç—å —Ñ–∞–π–ª –∏ –ø–∞—Ä—Å–∏—Ç—å –µ–≥–æ –≤ –æ–±—ä–µ–∫—Ç –≤ javascript:

```js
const readJson = (fileName) => {
    const file = fs.readFileSync(path.join(__dirname, fileName), "utf8");
    const json = JSON.parse(file);

    return json;
};
```

–¢–µ–ø–µ—Ä—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö –∞–∫—Ü–∏–π:

```js
const STORAGE_NAME = 'stocks.json';

app.get('/stocks', (req, res) => {
    const stocks = readJson(STORAGE_NAME);
    res.send(stocks);
});
```

–°–Ω–∞—á–∞–ª–∞ —á–∏—Ç–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞, –∏ –∑–∞—Ç–µ–º –∏—Ö –æ—Ç–¥–∞–µ–º. –¢–µ–ø–µ—Ä—å –Ω–∞–ø–∏—à–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–¥–Ω–æ–π –∞–∫—Ü–∏–∏ –ø–æ –µ–µ id:

```js
app.get('/stocks/:id', (req, res) => {
    const id = req.params.id; // 1
    
    const numberId = Number.parseInt(id);
    if (Number.isNaN(numberId)) { // 2
        res.status(400).send({status: 'Bad Request', message: 'id must be number!'});
    }

    const stocks = readJson(storageName);
    const stock = stocks.find((value) => { // 3
        return value.id === numberId;
    });

    if (stock) { // 4
        res.send(stock);
    } else {
        res.status(404).send({status: 'Not Found', message: `not found stock with id ${numberId}`});
    }
});
```
–ü—Ä–æ–π–¥–µ–º—Å—è –ø–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º:
1. –ü–æ–ª—É—á–∞–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä –∏–∑ URL –∑–∞–ø—Ä–æ—Å–∞, –ø—Ä–∏–º–µ—Ä: –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –∏–¥–µ—Ç –ø–æ –∞–¥—Ä–µ—Å—É `http://localhost:8000/stocks/2`, —Ç–æ `req.params.id` –≤–µ—Ä–Ω–µ—Ç 2, —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞, –º—ã —É–∫–∞–∑–∞–ª–∏ `:id`, –∑–∞–¥–∞–≤ –Ω–∞–∑–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –æ—Ç–∫—É–¥–∞ –µ–≥–æ –ø–æ–ª—É—á–∞—Ç—å.
2. –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ `id` - —á–∏—Å–ª–æ.
3. –ü–æ–∏—Å–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏ —Å `id === req.params.id`, –µ—Å–ª–∏ —Ç–∞–∫–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ –Ω–µ –±—É–¥–µ—Ç, —Ç–æ –≤ `stock` –±—É–¥–µ—Ç –ø—Ä–∏—Å–≤–æ–µ–Ω–æ `undefined`.
4. –ï—Å–ª–∏ —Ç–∞–∫–∞—è –∞–∫—Ü–∏—è –±—ã–ª–∞ –Ω–∞–π–¥–µ–Ω–∞, —Ç–æ –º—ã –æ—Ç–¥–∞–µ–º –µ–µ, –∏–Ω–∞—á–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –æ—à–∏–±–∫—É —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º 404

–í–µ—Å—å –∫–æ–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –Ω–∏–∂–µ:

```js
const fs = require('fs');
const path = require('path');
const express = require('express');

const app = express();

const HOST = 'localhost';
const PORT = 8000;

const readJson = (fileName) => {
    const file = fs.readFileSync(path.join(__dirname, fileName), "utf8");

    return JSON.parse(file);
};

const STORAGE_NAME = 'stocks.json';

app.get('/stocks', (req, res) => {
    const stocks = readJson(STORAGE_NAME);
    res.send(stocks);
});

app.get('/stocks/:id', (req, res) => {
    const id = req.params.id;
    const numberId = Number.parseInt(id);

    if (Number.isNaN(numberId)) {
        res.status(400).send({status: 'Bad Request', message: 'id must be number!'});
    }

    const stocks = readJson(storageName);
    const stock = stocks.find((value) => {
        return value.id === numberId;
    });

    if (stock) {
        res.send(stock);
    } else {
        res.status(404).send({status: 'Not Found', message: `not found stock with id ${numberId}`});
    }
});

app.listen(PORT, HOST, () => {
    console.log(`–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://${host}:${port}`);
});
```

–£ –Ω–∞—Å –≥–æ—Ç–æ–≤ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –±—ç–∫–µ–Ω–¥ –Ω–∞ node.js! –ù–æ –¥–∞–≤–∞–π—Ç–µ —Ç–µ–ø–µ—Ä—å –µ–≥–æ –Ω–µ–º–Ω–æ–≥–æ –ø—Ä–∏—á–µ—à–µ–º, –∏ –¥–æ–±–∞–≤–∏–º –≤ –ø—Ä–æ–µ–∫—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏.

## 6. –î–æ–±–∞–≤–ª—è–µ–º –≤ –ø—Ä–æ–µ–∫—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É (—Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–º –∫–æ–¥)

–û—Å–Ω–æ–≤—É –¥–ª—è –≤—Å–µ—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä –±—ç–∫–µ–Ω–¥–∞ —è–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ, –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫—É –∏ —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–æ–¥—Ö–æ–¥–æ–≤ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º–æ–≥—É—Ç –≤–Ω–æ—Å–∏—Ç—å—Å—è –∫–∞–∫–∏–µ-—Ç–æ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–∏, –Ω–æ —ç—Ç–∏ 3 —Å–ª–æ—è - —ç—Ç–æ –±–∞–∑–∞.

–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–¥–µ–ª–∏–º –Ω–∞—à—É —Å—É—â–Ω–æ—Å—Ç—å –∞–∫—Ü–∏–π –Ω–∞ —á–µ—Ç—ã—Ä–µ —Å–ª–æ—è: controller (–æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–ª–∏ —Å–µ—Ç–µ–≤–æ–π —Å–ª–æ–π), service (–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞), repository (–Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ä–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π),
DAO (–±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Ä–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ë–î).

–°–æ–∑–¥–∞–µ–º –ø–∞–ø–∫–∏ `internal`, `db`, `modules`. –î–∞–ª–µ–µ –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ `internal` —Å–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É `stocks` –∏ –≤–Ω—É—Ç—Ä–∏ –Ω–µ–µ 4 —Ñ–∞–π–ª–∞:
`StocksController.js`, `StocksService.js`, `StocksRespository.js`, `StocksDAO.js` –∏ `index.js`. 

–í–Ω—É—Ç—Ä—å modules –∫–ª–∞–¥–µ–º —Ñ–∞–π–ª `DBConnector.js` - —ç—Ç–æ –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å, —É–º–µ—é—â–∏–π —á–∏—Ç–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å –≤ json-—Ñ–∞–π–ª (–Ω–∞—à—É –∏–º–ø—Ä–æ–≤–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ë–î).

–í –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `db` –∫–ª–∞–¥–µ–º –Ω–∞—à–∏ json —Ñ–∞–π–ª—ã, —Ç–µ–ø–µ—Ä—å –≤—Å–µ –æ–Ω–∏ –±—É–¥—É—Ç –ª–µ–∂–∞—Ç—å —Ç–∞–º.

–î–∞–≤–∞–π—Ç–µ —Ç–µ–ø–µ—Ä—å —Ä–∞–∑–±–µ—Ä–µ–º –∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:

`DBConnector.js`
```js
const fs = require('fs');
const path = require('path');

class DBConnector {
    constructor(filename) {
        this.filename = filename;
    }

    readFile() {
        return fs.readFileSync(path.join(process.cwd(), 'db', this.filename), "utf8");
    }

    writeFile(data) {
        fs.writeFileSync(path.join(process.cwd(), 'db', this.filename), data, "utf8");
    }
}

module.exports = {
     DBConnector,
};
```

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω—Å—Ç–∞–Ω—Å–∞ –∫–ª–∞—Å—Å–∞ DBConnector –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –ø—É—Ç—å –¥–æ —Ñ–∞–π–ª–∞. –¢–∞–∫–∂–µ –¥–æ—Å—Ç—É–ø–Ω—ã 2 –º–µ—Ç–æ–¥–∞ –¥–ª—è —á—Ç–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –∏–∑ —Ñ–∞–π–ª–∞, –∏ –∑–∞–ø–∏—Å–∏ –≤ –Ω–µ–≥–æ —Å–∏–º–≤–æ–ª–æ–≤.

–î–∞–ª–µ–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º `StocksRepository.js`:

```js
const {DBConnector} = require('../../modules/DBConnector');

class StocksRepository {
    static db = new DBConnector('stocks.json');

    static read() {
        const file = this.db.readFile();

        return JSON.parse(file);
    }

    static write(json) {
        this.db.writeFile(JSON.stringify(json));
    }
}

module.exports = {
    StocksRepository,
}
```

StocksRepository - —ç—Ç–æ –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å (–∏–ª–∏ singleton). –î–æ—Å—Ç—É–ø –∫ –µ–≥–æ –º–µ—Ç–æ–¥–∞–º –∏ –ø–æ–ª—è–º –µ—Å—Ç—å —Ç–æ–ª—å–∫–æ —É —Å–∞–º–æ–≥–æ –∫–ª–∞—Å—Å,
–∞ –Ω–µ —É –µ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å–æ–≤. –ó–¥–µ—Å—å –º—ã —Å–æ–∑–¥–∞–µ–º 1 –∫–æ–Ω–Ω–µ–∫—Ç –∫ –Ω–∞—à–µ–º—É —Ñ–∞–π–ª—É `stocks.json` –∏ –æ–±—ä—è–≤–ª—è–µ–º –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–º–µ—é—Ç —á–∏—Ç–∞—Ç—å –∏–∑ –±–∞–∑—ã
–∏ –ø–∏—Å–∞—Ç—å –≤ –Ω–µ–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ json.

–≠—Ç–æ —É –Ω–∞—Å –¥–æ–≤–æ–ª—å–Ω–æ –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Å–ª–æ–π —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π. –û–Ω —É–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞—Ç—å –∏ –ø–∏—Å–∞—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª `stocks.json`.
–¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º, –∫–∞–∫ —ç—Ç–æ–π —Å—É—â–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª—è—é—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

`StocksDAO.js`
```js
const {StocksRepository} = require('./StocksRepository');

class StockDAO {
    constructor(id, src, title, text) {
        this.id = id;
        this.src = src;
        this.title = title;
        this.text = text;
    }

    static _validateId(id) {
        const numberId = Number.parseInt(id);
        if (Number.isNaN(numberId)) {
            throw new Error('invalidate id');
        }
    }

    static _validate(stock) {
        if (
            stock.id === undefined ||
            stock.src === undefined ||
            stock.title === undefined ||
            stock.text === undefined
        ) {
            throw new Error('invalidate stock data');
        }

        this._validateId(stock.id);
    }

    static find() {
        const stocks = StocksRepository.read();

        return stocks.map(({id, src, title, text}) => {
            return new this(id, src, title, text);
        });
    }

    static findById(id) {
        this._validateId(id);

        const stocks = StocksRepository.read();
        const stock = stocks.find((s) => s.id === id);

        return new this(stock.id, stock.src, stock.title, stock.text);
    }

    static insert(stock) {
        this._validate(stock);

        const stocks = StocksRepository.read();
        StocksRepository.write([...stocks, stock]);

        return new this(stock.id, stock.src, stock.title, stock.text);
    }

    static delete(id) {
        this._validateId(id);

        const stocks = StocksRepository.read();
        const filteredStocks = stocks.filter((s) => s.id !== id);

        StocksRepository.write(filteredStocks);

        return filteredStocks.map(({id, src, title, text}) => {
            return new this(id, src, title, text);
        });
    }

    toJSON() {
        return {
            id: this.id,
            src: this.src,
            title: this.title,
            text: this.text,
        }
    }
}

module.exports = {
    StockDAO,
}
```

–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è, —Ç—É—Ç —É–∂–µ —É –Ω–∞—Å –µ—Å—Ç—å –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç –∫–∞–∫–∏–µ-—Ç–æ —á–µ—Ç–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Å—É—â–Ω–æ—Å—Ç—å—é –∞–∫—Ü–∏–π.
–ù–∞–ø—Ä–∏–º–µ—Ä, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏, –ø–æ–∏—Å–∫ –µ–µ –ø–æ id, —É–¥–∞–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –ø–æ id –∏ —Ç–¥. 

–ù–∞—à –∫–ª–∞—Å—Å –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –µ–≥–æ –º–µ—Ç–æ–¥—ã –ø—Ä–∏–≤—è–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ –∫ —Å–∞–º–æ–º—É –∫–ª–∞—Å—Å—É, –∞ –ø–æ–ª—è –∂–µ –ø—Ä–∏–≤—è–∑–∞–Ω—ã —Ç–æ–ª—å–∫–æ –∫ –µ–≥–æ –∏–Ω—Å—Ç–∞–Ω—Å—É. 
–ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç? –ê —Ç–æ, —á—Ç–æ –∫–æ–≥–¥–∞ –º—ã –∑–∞—Ö–æ—Ç–∏–º –≤—ã–∑–≤–∞—Ç—å –∫–∞–∫–æ–π-—Ç–æ –º–µ—Ç–æ–¥, –º—ã —Å–º–æ–∂–µ–º —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –≤–æ—Ç —Ç–∞–∫:
`const stock = StocksDAO.findById(id)`, –∏ —Ç.–∫. `findById` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–∞–º–æ–≥–æ —Å–µ–±—è `return new this(stock.id, stock.src, stock.title, stock.text)`,
—Ç–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–Ω—Å—Ç–∞–Ω—Å –∫–ª–∞—Å—Å–∞ `StocksDAO`, –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –ø–æ–ª—è–º (id, src, title, text), –∞ —Ç–∞–∫–∂–µ –º–µ—Ç–æ–¥—É `toJSON()`. 

–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –≤ —Ç–æ–º, —á—Ç–æ –Ω–∞—à –∫–ª–∞—Å—Å —É–º–µ–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –Ω–æ —Ç–∞–∫–∂–µ —Ö—Ä–∞–Ω–∏—Ç—å –∏—Ö –∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∏—Ç—å.

–¢–µ–ø–µ—Ä—å –ø–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ DAO –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `StocksService.js`:

```js
const {StockDAO} = require('./StockDAO');

class StocksService {
    static findStocks(id) {
        if (id !== undefined) {
            return StockDAO.findById(id).toJSON();
        }

        return StockDAO.find().map((stock) => stock.toJSON());
    }

    static addStock(stock) {
        return StockDAO.insert(stock).toJSON();
    }

    static deleteStock(id) {
        return StockDAO.delete(id).map((stock) => stock.toJSON());
    }
}

module.exports = {
    StocksService,
}
```

–ö–ª–∞—Å—Å `StocksService` —Ç–∞–∫–∂–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º. –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é —Å –¥–∞–Ω–Ω—ã–º–∏ –∏ –∞–±—Å–æ—Ä–±–∏—Ä—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è.
–î–ª—è –¥–∞–Ω–Ω–æ–π —Å—É—â–Ω–æ—Å—Ç–∏ –Ω–µ—Ç —Ö–æ—Ä–æ—à–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –Ω–æ —ç—Ç–æ –º–æ–≥–ª–∏ –±—ã –±—ã—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–∞–≤ –∏ —Ä–∞–∑–ª–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö.

–¢–µ–ø–µ—Ä—å –Ω–∞–∫–æ–Ω–µ—Ü –ø–µ—Ä–µ–π–¥–µ–º –∫ —Å–µ—Ç–µ–≤–æ–º—É —Å–ª–æ—é, –∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ñ–∞–π–ª `StocksController.js`:
```js
const {StocksService} = require('./StocksService');

class StocksController {
    static findStocks(req, res) {
        try {
            res.send(StocksService.findStocks());
        } catch (err) {
            res.status(400).send({status: 'Bad Request', message: err.message})
        }
    }

    static findStockById(req, res) {
        try {
            const id = Number.parseInt(req.params.id);
            res.send(StocksService.findStocks(id))
        } catch (err) {
            res.status(400).send({status: 'Bad Request', message: err.message})
        }
    }

    static addStock(req, res) {
        try {
            res.send(StocksService.addStock(req.body));
        } catch (err) {
            res.status(400).send({status: 'Bad Request', message: err.message})
        }
    }

    static deleteStock(req, res) {
        try {
            const id = Number.parseInt(req.params.id);
            res.send(StocksService.deleteStock(id));
        } catch (err) {
            res.status(400).send({status: 'Bad Request', message: err.message})
        }
    }
}

module.exports = {
    StocksController,
};
```

–ö–ª–∞—Å—Å `StocksController` —è–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º. –ö–∞–∂–¥—ã–π –µ–≥–æ –º–µ—Ç–æ–¥ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç req –∏ res, –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã, –∏ –æ—Ç–¥–∞–≤–∞—Ç—å –Ω–∞ –Ω–∏—Ö –æ—Ç–≤–µ—Ç—ã.
–î–∞–Ω–Ω–∞—è —Å—É—â–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä—É–µ—Ç –Ω–∞ —Å–µ–±–µ —Ä–∞–±–æ—Ç—É —Å —Å–µ—Ç—å—é, –∏ –¥–∞–ª—å—à–µ –≤—Å–µ –º–µ—Ç–æ–¥—ã –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä—å `express.router`. 
–ü–æ–¥—Ä–æ–±–Ω–µ–µ –º—ã —ç—Ç–æ –º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å –≤ —Ñ–∞–π–ª–µ `index.js` –≤–Ω—É—Ç—Ä–∏ –ø–∞–ø–∫–∏ `stocks`.

```js
const express = require('express');
const {StocksController} = require('./StocksController');

const router = express.Router();

router.get('/', StocksController.findStocks);
router.get('/:id', StocksController.findStockById);
router.post('/', StocksController.addStock);
router.delete('/:id', StocksController.deleteStock);

module.exports = router;
```

–ó–¥–µ—Å—å –º—ã —Å–æ–∑–¥–∞–µ–º —Ä–æ—É—Ç–µ—Ä, –∏ –Ω–∞–∑–Ω–∞—á–∞–µ–º –∫–∞–∂–¥—ã–π –º–µ—Ç–æ–¥ –Ω–∞—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π http-–º–µ—Ç–æ–¥ –∏ url.

–î–∞–ª–µ–µ –≤ —Å–∞–º–æ–º –≥–ª–∞–≤–Ω–æ–º —Ñ–∞–π–ª–µ `index.js` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–æ—Ç —Ä–æ—É—Ç–µ—Ä –ø–æ–¥ –æ–±—â–∏–º —É—Ä–ª–æ–º `/stocks`:

```js
const express = require('express');

const stocks = require('./internal/stocks');

const app = express();

const host = 'localhost';
const port = 8000;

app.use(express.json());

app.use('/stocks', stocks);

app.listen(port, host, () => {
    console.log(`–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É http://${host}:${port}`);
});
```

–¢–µ–ø–µ—Ä—å –Ω–∞—à–µ API —É–º–µ–µ—Ç —á–∏—Ç–∞—Ç—å –∞–∫—Ü–∏–∏, —Å–æ–∑–¥–∞–≤–∞—Ç—å, –∞ —Ç–∞–∫–∂–µ —É–¥–∞–ª—è—Ç—å –∏—Ö.

## 5. –ü–∏—à–µ–º API –Ω–∞ NestJS

**–ó–∞–¥–∞—á–∞** - —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å [REST API](https://habr.com/ru/articles/483202/) —Å–µ—Ä–≤–∏—Å –∫–∞—Ä—Ç–æ—á–µ–∫:

-   GET /stocks/ - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
-   POST /stocks - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
-   GET /stocks/:id - –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ ID
-   PATCH /stocks/:id - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ ID
-   DELETE /stocks/:id - —É–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –ø–æ ID

–®–∞–≥–∏:
1. [–°–æ–∑–¥–∞–Ω–∏–µ](https://docs.nestjs.com/first-steps) –Ω–æ–≤–æ–≥–æ NestJS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
2. [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è](https://docs.nestjs.com/recipes/crud-generator) CRUD-–∏—Å—Ç–æ—á–Ω–∏–∫–∞.
3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ `FileService` –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –≤ json-—Ñ–∞–π–ª.
4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ `Stock` –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤.
5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞ —Å –ø–æ–º–æ—â—å—é [Postman](https://www.postman.com/).

[NestJS](https://docs.nestjs.com/) - –º–æ—â–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ NodeJS —Å –ø–æ–ª–Ω–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TypeScript, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—â–∏–π –≥–æ—Ç–æ–≤—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –¢–∞–∫–∂–µ NestJS –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç DI (dependency injection) —Å–∏—Å—Ç–µ–º—É, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ CLI –¥–ª—è NestJS –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:

```shell
npm i -g @nestjs/cli
nest new example-nestjs --strict
```

```shell
‚ú®  We will scaffold your app in a few seconds..

‚úî Which package manager would you ‚ù§Ô∏è  to use? npm
CREATE example-nestjs/.prettierrc (51 bytes)
CREATE example-nestjs/README.md (5020 bytes)
CREATE example-nestjs/eslint.config.mjs (856 bytes)
CREATE example-nestjs/nest-cli.json (171 bytes)
CREATE example-nestjs/package.json (2030 bytes)
CREATE example-nestjs/tsconfig.build.json (97 bytes)
CREATE example-nestjs/tsconfig.json (541 bytes)
CREATE example-nestjs/src/app.controller.ts (274 bytes)
CREATE example-nestjs/src/app.module.ts (249 bytes)
CREATE example-nestjs/src/app.service.ts (142 bytes)
CREATE example-nestjs/src/main.ts (228 bytes)
CREATE example-nestjs/src/app.controller.spec.ts (617 bytes)
CREATE example-nestjs/test/jest-e2e.json (183 bytes)
CREATE example-nestjs/test/app.e2e-spec.ts (674 bytes)

‚úî Installation in progress... ‚òï

üöÄ  Successfully created project example-nestjs

```

CLI —Å–æ–∑–¥–∞—Å—Ç —Å–∫–µ–ª–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í—ã–ø–æ–ª–Ω–∏–º `npm run start` –∏ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ —Å—Ç–∞—Ä—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É `http://localhost:3000`:

![Hello World!](./images/hello-world.png)

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å –ø–æ–º–æ—â—å—é CLI –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –í —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—ã –∫–ª–æ–Ω–∏—Ä—É–µ—Ç–µ –ø—Ä–æ–µ–∫—Ç, –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤—Ä—É—á–Ω—É—é —Å –ø–æ–º–æ—â—å—é `npm ci` / `npm i`.

2. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ CRUD-–∏—Å—Ç–æ—á–Ω–∏–∫–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏ `Stocks`. –§–ª–∞–≥ `--no-spec` –æ—Ç–∫–ª—é—á–∞–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ - –æ–Ω–∏ –Ω–µ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è.

```shell
cd example-nestjs
```

```shell
‚ûú  example-nestjs git:(main) ‚úó nest generate resource stocks --no-spec
‚úî What transport layer do you use? REST API
‚úî Would you like to generate CRUD entry points? Yes
CREATE src/stocks/stocks.controller.ts (915 bytes)
CREATE src/stocks/stocks.module.ts (255 bytes)
CREATE src/stocks/stocks.service.ts (623 bytes)
CREATE src/stocks/dto/create-stock.dto.ts (31 bytes)
CREATE src/stocks/dto/update-stock.dto.ts (173 bytes)
CREATE src/stocks/entities/stock.entity.ts (22 bytes)
UPDATE package.json (2063 bytes)
UPDATE src/app.module.ts (316 bytes)
‚úî Packages installed successfully.
```

–ü–æ—è–≤–∏–ª–∏—Å—å —Å–ª–µ–¥—É—é—â–∏–µ —Å—É—â–Ω–æ—Å—Ç–∏:

-   Module - –≥—Ä—É–ø–ø–∏—Ä—É—é—â–∞—è —Å—É—â–Ω–æ—Å—Ç—å –¥–ª—è –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —Ä–µ—à–∞—é—â–∏—Ö –æ–±—â—É—é –∑–∞–¥–∞—á—É. –ú–æ–¥—É–ª–∏ –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏, –æ–±—Ä–∞–∑—É—è –∏–µ—Ä–∞—Ä—Ö–∏—é –º–æ–¥—É–ª–µ–π;
-   Controller - –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä REST API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤;
-   Service - —Å–µ—Ä–≤–∏—Å, —Ä–µ—à–∞—é—â–∏–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É –∏ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—â–∏–π –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –ª–æ–≥–∏–∫—É;
-   Entities - –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–∞;
-   Dto - "—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ" —Å—É—â–Ω–æ—Å—Ç–∏, –æ—Ç—Ä–∞–∂–∞—é—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –º–µ–∂–¥—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º–∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è;

–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ CRUD-–∏—Å—Ç–æ—á–Ω–∏–∫–∞, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–ª–∞—Å—Å—ã, –º–µ—Ç–æ–¥—ã –≤ –Ω–∏—Ö, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ —Å–≤—è–∑—ã–≤–∞–µ—Ç –∫–ª–∞—Å—Å—ã –º–µ–∂–¥—É —Å–æ–±–æ–π.

–°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ –æ–±—â–µ–º –≤–∏–¥–µ:

![Sequence base](images/sequence-base.png)

–°—Ö–µ–º–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤ –¥–∞–Ω–Ω–æ–π –õ–†:

![Sequence stock](images/sequence-stock.png)

**–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** —è–≤–ª—è–µ—Ç—Å—è —Å–≤—è–∑—É—é—â–∏–º –∑–≤–µ–Ω–æ–º –º–µ–∂–¥—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∏ —Å–µ—Ä–≤–∏—Å–æ–º –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏. –ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞ **–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É —Å–µ—Ä–≤–∏—Å—É(–∞–º). –¢–∞–∫–∂–µ –≤ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ **–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞** –º–æ–≥—É—Ç –≤—Ö–æ–¥–∏—Ç—å —Ç–∞–∫–∏–µ –∑–∞–¥–∞—á–∏, –∫–∞–∫: –∞–Ω–∞–ª–∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∑–∞–ø—Ä–æ—Å–∞, –≤–æ–∑–≤—Ä–∞—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –∫–æ–¥–æ–≤ –æ—à–∏–±–æ–∫ –∏ —Ç.–¥. –í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å N **–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤**.

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∞—Å—Å–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –µ–≥–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è `stocksService`, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º **–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** –º–æ–∂–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø—É–±–ª–∏—á–Ω—ã–º –º–µ—Ç–æ–¥–∞–º `stocksService` –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –ø—Ä–∏ –ø–æ–º–æ—â–∏ `this.stocksService`. –≠—Ç–∞ —Ç–µ—Ö–Ω–∏–∫–∞ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è [Dependency Injection](https://docs.nestjs.com/fundamentals/custom-providers). [–í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π](https://ru.wikipedia.org/wiki/–í–Ω–µ–¥—Ä–µ–Ω–∏–µ_–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏) - –º–æ—â–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏–∏ **–ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** –≤ NestJS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏ –≥–∏–±–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –Ω–∞ –ª—é–±–æ–º —É—Ä–æ–≤–Ω–µ.

`stocks/stocks.controller.ts`:
```ts
@Controller('stocks')
export class StocksController {
    constructor(private readonly stocksService: StocksService) {}

    @Post()
    create(@Body() createStockDto: CreateStockDto) {
        return this.stocksService.create(createStockDto);
    }

    @Get()
    findAll() {
        return this.stocksService.findAll();
    }

    @Get(':id')
    findOne(@Param('id') id: string) {
        return this.stocksService.findOne(+id);
    }

    @Patch(':id')
    update(@Param('id') id: string, @Body() updateStockDto: UpdateStockDto) {
        return this.stocksService.update(+id, updateStockDto);
    }

    @Delete(':id')
    remove(@Param('id') id: string) {
        return this.stocksService.remove(+id);
    }
}
```

–°–µ—Ä–≤–∏—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏. –ï–≥–æ –∑–∞–¥–∞—á–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –º–∞–Ω–∏–ø—É–ª—è—Ü–∏—è—Ö —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ —Ñ–∞–π–ª–∞ (–∏–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ –æ–±—â–µ–º —Å–ª—É—á–∞–µ) –∏ –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –Ω–∞ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å - –≤ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä.

`stocks/stocks.service.ts`:
```ts
@Injectable()
export class StocksService {
  create(createStockDto: CreateStockDto) {
    return 'This action adds a new stock';
  }

  findAll() {
    return `This action returns all stocks`;
  }

  findOne(id: number) {
    return `This action returns a #${id} stock`;
  }

  update(id: number, updateStockDto: UpdateStockDto) {
    return `This action updates a #${id} stock`;
  }

  remove(id: number) {
    return `This action removes a #${id} stock`;
  }
}
```

–ú–æ–¥—É–ª—å –≥—Ä—É–ø–ø–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã, —Ä–µ—à–∞—é—â–∏–µ –∫–∞–∫—É—é-—Ç–æ –æ–±—â—É—é –∑–∞–¥–∞—á—É. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–¥–∏–Ω –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏ –æ–¥–∏–Ω –ø—Ä–æ–≤–∞–π–¥–µ—Ä, –æ–¥–Ω–∞–∫–æ —Å —Ä–æ—Å—Ç–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏—Ö —á–∏—Å–ª–æ —Ç–æ–∂–µ –±—É–¥–µ—Ç —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å—Å—è.

`stocks/stocks.module.ts`:
```ts
@Module({
  controllers: [StocksController],
  providers: [StocksService],
})
export class StocksModule {}
```

–ß—Ç–æ–±—ã –º–æ–¥—É–ª—å –∑–∞—Ä–∞–±–æ—Ç–∞–ª, –µ–≥–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –≥–ª–∞–≤–Ω—ã–π –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã–π –º–æ–¥—É–ª—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - **AppModule**:

`app.module.ts`:
```ts
@Module({
  imports: [StocksModule],
})
export class AppModule {}
```

–ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã—Ö –º–æ–¥—É–ª–µ–π –∏—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ **AppModule**, –µ—Å–ª–∏ —ç—Ç–æ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ—à–ª–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

–ö –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–º —Å—É—â–Ω–æ—Å—Ç—è–º, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–º —Ç–∏–ø–æ-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–Ω–æ—Å—è—Ç—Å—è: `Entity` –∏ `Dto`. –ö–ª–∞—Å—Å —Å—É—â–Ω–æ—Å—Ç–∏ `Stock` –æ—Ç—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å—É—â–Ω–æ—Å—Ç–∏: –ø–æ–ª—è –∏ –º–µ—Ç–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –∫ –Ω–µ–º—É –æ—Ç–Ω–æ—Å—è—Ç—Å—è.

`stocks/entities/stock.entity.ts`:
```ts
export class Stock {}
```

DTO —Å—É—â–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç –ø–∞—Ç—Ç–µ—Ä–Ω [DTO](https://ru.wikipedia.org/wiki/DTO). –≠—Ç–æ –æ–¥–∏–Ω –∏–∑ —à–∞–±–ª–æ–Ω–æ–≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–ª–æ—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –û–±—ä–µ–∫—Ç DTO –æ—Ç—Ä–∞–∂–∞–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –≥—Ä–∞–Ω–∏—Ü—ã –æ–¥–Ω–æ–≥–æ —Å–ª–æ—è –¥–æ –≥—Ä–∞–Ω–∏—Ü—ã –¥—Ä—É–≥–æ–≥–æ.

DTO —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ `CreateStockDto`

`stocks/dto/create-stock.dto.ts`:

```ts
export class CreateStockDto {}
```
DTO –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–∫–∏ `CreateStockDto`. –ù–∞—Å–ª–µ–¥—É–µ—Ç `CreateStockDto` —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —á–∞—Å—Ç–∏—á–Ω–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤ `PartialType`. –≠—Ç–æ –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤—Å–µ –ø–æ–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏, –∞ –ª–∏—à—å —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å.

`stocks/dto/update-stock.dto.ts`:

```ts
export class UpdateStockDto extends PartialType(CreateStockDto) {}
```

3. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∞—Å—Å–∞ `FileService` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å json-—Ñ–∞–π–ª–æ–º.

–í –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ë–î (–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö). –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∞–π–ª. `stocks.json` —Å–æ–¥–µ—Ä–∂–∏—Ç –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤-–∫–∞—Ä—Ç–æ—á–µ–∫:

```json
[
    {
        "id": 1,
        "src": "https://i.pinimg.com/originals/c9/ea/65/c9ea654eb3a7398b1f702c758c1c4206.jpg",
        "title": "–ê–∫—Ü–∏—è 1",
        "text": "–¢–∞–∫–æ–π –∞–∫—Ü–∏–∏ –≤—ã –µ—â–µ –Ω–µ –≤–∏–¥–µ–ª–∏ 1"
    },
    {
        "id": 2,
        "src": "https://i.pinimg.com/originals/c9/ea/65/c9ea654eb3a7398b1f702c758c1c4206.jpg",
        "title": "–ê–∫—Ü–∏—è 2",
        "text": "–¢–∞–∫–æ–π –∞–∫—Ü–∏–∏ –≤—ã –µ—â–µ –Ω–µ –≤–∏–¥–µ–ª–∏ 2"
    },
    {
        "id": 3,
        "src": "https://i.pinimg.com/originals/c9/ea/65/c9ea654eb3a7398b1f702c758c1c4206.jpg",
        "title": "–ê–∫—Ü–∏—è 3",
        "text": "–¢–∞–∫–æ–π –∞–∫—Ü–∏–∏ –≤—ã –µ—â–µ –Ω–µ –≤–∏–¥–µ–ª–∏ 3"
    },
    {
        "id": 4,
        "src": "https://i.pinimg.com/originals/c9/ea/65/c9ea654eb3a7398b1f702c758c1c4206.jpg",
        "title": "–ê–∫—Ü–∏—è 4",
        "text": "–¢–∞–∫–æ–π –∞–∫—Ü–∏–∏ –≤—ã –µ—â–µ –Ω–µ –≤–∏–¥–µ–ª–∏ 4"
    }
]
```

–ü–æ–ª–æ–∂–∏–º —ç—Ç–æ—Ç —Ñ–∞–π–ª –≤ –ø–∞–ø–∫—É `assets`. –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –ø–æ–ª—É—á–∏–ª—Å—è —Å–ª–µ–¥—É—é—â–∏–π - `example-nestjs/src/assets/stocks.json`.

–í–∞–∂–Ω–æ –Ω–µ –∑–∞–±—ã—Ç—å —Å–¥–µ–ª–∞—Ç—å –ø–∞—Ä—É –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –≤–µ—â–µ–π –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å json —Ñ–∞–π–ª–æ–º:

- –ß—Ç–æ–±—ã Typescript –º–æ–≥ —Ä–∞–±–æ—Ç–∞—Ç—å —Å json —Ñ–∞–π–ª–∞–º–∏ –Ω—É–∂–Ω–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö TS-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –≤ —Ñ–∞–π–ª–µ `tsconfig.json` —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `resolveJsonModule` –≤ `true`:

`example-nestjs/tsconfig.json`:

```json
{
  "compilerOptions": {
    ...
    "resolveJsonModule": true   
  }
}
```
- –ß—Ç–æ–±—ã json-—Ñ–∞–π–ª –ø–æ–ø–∞–¥–∞–ª –≤ –±–∞–Ω–¥–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Å—Å–µ—Ç–æ–≤ –Ω—É–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å –æ–± —ç—Ç–æ–º –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –∏ –∑–∞–¥–µ–∫–ª–∞—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞–ø–∫—É –≤ —Ä–∞–∑–¥–µ–ª–µ `compilerOptions`: 

`example-nestjs/nest-cli.json`:

```json
{
  ...
  "compilerOptions": {
    ...,
    "assets": ["assets/*"]
  }
}
```

–ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–æ–∑–¥–∞–Ω–∏—é —Å–µ—Ä–≤–∏—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–º.

–•–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å-—Å–µ—Ä–≤–∏—Å `FileService`. –ï–≥–æ –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –≤—Ä—É—á–Ω—É—é, –∞ –º–æ–∂–Ω–æ –∏ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è NestJS CLI –∫–æ–º–∞–Ω–¥–æ–π [generate](https://docs.nestjs.com/cli/usages#nest-generate).

–ï—Å–ª–∏ –∫–æ–¥ —Å–µ—Ä–≤–∏—Å–∞ –ø–æ–∫–∞–∂–µ—Ç—Å—è –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–º - –Ω–µ —Å—Ç–æ–∏—Ç –ø—É–≥–∞—Ç—å—Å—è. –û–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π. –ì–ª–∞–≤–Ω–∞—è –∑–∞–¥–∞—á–∞ `FileService` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –≤ —Ñ–∞–π–ª. –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∞—Å—Å–∞.

`file.service.ts`:

```ts
import { Injectable } from '@nestjs/common';
import * as fs from 'fs';
import * as path from 'path';

export interface FileAccessor {
  filePath: string;
}

@Injectable()
export class FileService<I> {
  private readonly filePath = path.resolve(__dirname);

  constructor(filePath?: string) {
    if (filePath) {
      this.filePath = path.resolve(__dirname, filePath);
    }
  }

  public read<T extends I>(): T {
    const data = fs.readFileSync(this.filePath, 'utf8');

    return JSON.parse(data) as T;
  }

  public add<T>(newData: T): void {
    const data = this.read();

    if (Array.isArray(data)) {
      data.push(newData);
    }

    this.write(data);
  }

  public write<T extends I>(data: T): void {
    fs.writeFileSync(this.filePath, JSON.stringify(data, null, 2), 'utf8');
  }
}
```

- –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `FileAccessor` –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ `FileService` –≤ –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–∞—Ö;
- –ú–µ—Ç–æ–¥ `read` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å—á–∏—Ç—ã–≤–∞–Ω–∏–µ –∏–∑ —Ñ–∞–π–ª–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON –≤ –≤–∏–¥–µ JavaScript-–æ–±—ä–µ–∫—Ç–∞; 
- –ú–µ—Ç–æ–¥ `write` –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–ø–∏—Å—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∞–π–ª, –ø—Ä–µ–æ–±—Ä–∞–∑—É—è –≤ —Å—Ç—Ä–æ–∫—É –¥–ª—è JSON-—Ñ–∞–π–ª–∞;
- –ú–µ—Ç–æ–¥ `add` –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ –∏ –µ—Å–ª–∏ –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è –º–∞—Å—Å–∏–≤–æ–º, —Ç–æ –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º, –∞ –¥–∞–ª–µ–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–∞–π–ª.

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–æ–ª—É—á–∏–ª—Å—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π.

–î–µ–∫–æ—Ä–∞—Ç–æ—Ä `Injectable()` –¥–µ–ª–∞–µ—Ç –∫–ª–∞—Å—Å-—Å–µ—Ä–≤–∏—Å –≤–Ω–µ–¥—Ä—è–µ–º—ã–º –≤ –¥—Ä—É–≥–∏–µ –∫–ª–∞—Å—Å—ã. –ß—Ç–æ–±—ã –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–µ–∫–ª–∞—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –≤ —Å–ø–∏—Å–∫–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∫–∞–∫–æ–≥–æ-—Ç–æ –º–æ–¥—É–ª—è. –û–±—ä—è–≤–∏–º —Å–µ—Ä–≤–∏—Å –≤ `StocksModule`, —á—Ç–æ–±—ã –µ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö, –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–∏—Ö `StocksModule`:

`stocks/stocks.module.ts`:

```ts
@Module({
  controllers: [StocksController],
  providers: [
    StocksService,
    {
      provide: FileService,
      useFactory: (stocks: StocksModule) =>
        new FileService<Stock[]>(stocks.filePath),
      inject: [StocksModule],
    },
  ],
})
export class StocksModule implements FileAccessor {
  public readonly filePath = 'assets/stocks.json';
}
```

–ß—Ç–æ–±—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–æ–∂–Ω–æ –±—ã–ª–æ –≤–Ω–µ–¥—Ä–∏—Ç—å –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –¥—Ä—É–≥–æ–≥–æ –∫–ª–∞—Å—Å–∞, –µ–µ –Ω—É–∂–Ω–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∏–ª–∏ "–∑–∞–ø—Ä–æ–≤–∞–π–¥–∏—Ç—å" (`provide` - –ø–æ—Å—Ç–∞–≤–∫–∞). –í —ç—Ç–æ–º –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. 

–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –¥–ª—è "–ø—Ä–æ–≤–∞–π–¥–∏–Ω–≥–∞" –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∞–±—Ä–∏–∫–∞, —Å–æ–∑–¥–∞—é—â–∞—è –Ω–æ–≤—ã–π –∏–Ω—Å—Ç–∞–Ω—Å –∫–ª–∞—Å—Å–∞ `FileService`, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É, —Å –∫–æ—Ç–æ—Ä—ã–º –æ–Ω –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å. –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–ª–∞—Å—Å–µ –º–æ–¥—É–ª—è `StocksModule`, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `FileAccessor`.

–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ `useFactory` - –æ–±—ã—á–Ω–∞—è –∫–æ–ª–ª–±–µ–∫-—Ñ—É–Ω–∫—Ü–∏—è, –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∫–æ—Ç–æ—Ä–æ–π —è–≤–ª—è—é—Ç—Å—è –¥—Ä—É–≥–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –Ω—É–∂–Ω—ã —Ñ–∞–±—Ä–∏–∫–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. –≠—Ç–∏ –¥—Ä—É–≥–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤ `inject`. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Ñ–∞–±—Ä–∏–∫–µ –±—É–¥–µ—Ç –Ω—É–∂–µ–Ω –∫–ª–∞—Å—Å `StocksModule`, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ `FileService`.

–í —Ü–µ–ª–æ–º, –º–æ–∂–Ω–æ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –≤ –∫–ª–∞—Å—Å–µ `StocksModule`, –∞ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–≥–æ —Å—Ä–∞–∑—É –≤ `FileService`. –†–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç —Ç–∞–∫–æ–π –∂–µ –∏ –Ω–µ –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `inject`:

```ts
@Module({
  controllers: [StocksController],
  providers: [
    StocksService,
    {
      provide: FileService,
      useFactory: () => new FileService<Stock[]>('assets/stocks.json'),
    },
  ],
})
export class StocksModule {}
```

–ï—Å–ª–∏ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–æ–º –∑–∞–∫–∞–∑–æ–≤, —ç—Ç–æ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ª–µ–≥–∫–æ —Å–¥–µ–ª–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–º –æ–±—Ä–∞–∑–æ–º, –¥–æ–±–∞–≤–∏–≤ –≤ –º–æ–¥—É–ª—å –∑–∞–∫–∞–∑–æ–≤ `OrdersModule` –ø—Ä–æ–≤–∞–π–¥–µ—Ä `FileService` —Å –ø—É—Ç–µ–º –∫ —Ñ–∞–π–ª—É `orders.json`:

```ts
@Module({
  controllers: [OrdersController],
  providers: [
    OrdersService,
    {
      provide: FileService,
      useFactory: () => new FileService<Order[]>('assets/orders.json'),
    },
  ],
})
export class OrdersModule {}
```

–ò –º–æ–∂–Ω–æ –≤–Ω–µ–¥—Ä—è—Ç—å `FileService` –≤ `OrdersService` - –æ–Ω –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–æ–º –ø–æ –ø—É—Ç–∏ `assets/orders.json`.


4. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ Stock –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –º–µ—Ç–æ–¥–æ–≤.

–ò—Å—Ö–æ–¥—è –∏–∑ json-—Ñ–∞–π–ª–∞, –∫–∞—Ä—Ç–æ—á–∫–∞ –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:

`stocks/entities/stock.entity.ts`:

```ts
export class Stock {
  id: number;
  src: string;
  title: string;
  text: string;
}
```

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∞ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ç–∞–∫–æ–π –∂–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è `id`. –≠—Ç–æ –ø–æ–ª–µ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç—å—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - –æ–Ω–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –±–µ–∫–µ–Ω–¥–µ.

`stocks/dto/create-stock.dto.ts`:

```ts
export class CreateStockDto {
  src: string;
  title: string;
  text: string;
}
```

–§–∞–π–ª –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ `stocks/stocks.contoller.ts` –º–æ–∂–Ω–æ –Ω–µ –º–µ–Ω—è—Ç—å, —Ç–∞–º —É–∂–µ –µ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –≤—ã–∑–æ–≤—ã –º–µ—Ç–æ–¥–æ–≤ —Å–µ—Ä–≤–∏—Å–∞ `StocksService`. –û—Å—Ç–∞–ª–æ—Å—å –∑–∞–º–µ–Ω–∏—Ç—å –∑–∞–≥–ª—É—à–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `StocksService`:

`stocks/stocks.service.ts`:

```ts
@Injectable()
export class StocksService {
  constructor(private fileService: FileService<Stock[]>) {}

  create(createStockDto: CreateStockDto) {
    const stocks = this.fileService.read();

    // –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –Ω–æ–≤—ã–π id = —Ç–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–∞—Ä—Ç–æ—á–µ–∫ + 1
    const stock = { ...createStockDto, id: stocks.length + 1 };

    this.fileService.add(stock);
  }

  findAll(): Stock[] {
    const stocks = this.fileService.read();

    return stocks;
  }

  findOne(id: number): Stock | null {
    const stocks = this.fileService.read();

    return stocks.find((stock) => stock.id === id) ?? null;
  }

  update(id: number, updateStockDto: UpdateStockDto): void {
    const stocks = this.fileService.read();

    const updatedStocks = stocks.map((stock) =>
      stock.id === id ? { ...stock, ...updateStockDto } : stock,
    );

    this.fileService.write(updatedStocks);
  }

  remove(id: number): void {
    const filteredStocks = this.fileService
      .read()
      .filter((stock) => stock.id !== id);

    this.fileService.write(filteredStocks);
  }
}
```

–ù–∞ –∫–ª–∏–µ–Ω—Ç–µ —á–∞—Å—Ç–æ –±—ã–≤–∞–µ—Ç –ø–æ—Ç—Ä–µ–±–Ω–æ—Å—Ç—å –∏—Å–∫–∞—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ, –ø–æ—ç—Ç–æ–º—É –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã API –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª —Ç–∞–∫—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—å. –î–æ–±–∞–≤–∏–º –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–∞—Ä—Ç–æ—á–µ–∫ —á–µ—Ä–µ–∑ `query` –ø–∞—Ä–∞–º–µ—Ç—Ä - GET `/stocks?title=someTitle`.

–ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–æ—Å—Ç–∞–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–π –≤ query –ø–∞—Ä–∞–º–µ—Ç—Ä –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –µ–≥–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ –º–µ—Ç–æ–¥–∞ —Å–µ—Ä–≤–∏—Å–∞ –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç:

`stocks/stocks.controller.ts`:

```ts
@Controller('stocks')
export class StocksController {
  ...

  @Get()
  findAll(@Query('title') title?: string): Stock[] {
    return this.stocksService.findAll(title);
  }

  ...
}
```

–í —Å–µ—Ä–≤–∏—Å–µ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—É—á–∞–µ–º—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ –ø–æ–ª—é `title` –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤ `findAll` –ø–µ—Ä–µ–¥–∞–ª–∏ `title`:

`stocks/stocks.service.ts`:

```ts
@Injectable()
export class StocksService {
  ...

  findAll(title?: string): Stock[] {
    const stocks = this.fileService.read();

    return title
      ? stocks.filter((stock) =>
          stock.title.toLowerCase().includes(title.toLowerCase()),
        )
      : stocks;
  }
  
  ...
}
```

–û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–∞ —Å –ø–æ–º–æ—â—å—é [Postman](https://www.postman.com/).

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —É—Ç–∏–ª–∏—Ç–∞ [Postman](https://www.postman.com/downloads/). –û–Ω–∞ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∏ GUI –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤. –í —Ü–µ–ª–æ–º, –º–æ–∂–Ω–æ –∫–∞–∫–∏—Ö-—Ç–æ –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏ [`curl`](https://curl.se/), –æ–¥–Ω–∞–∫–æ Postman –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–≤–æ–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.

–ó–∞–ø—É—Å–∫–∞–µ–º NestJS –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –µ—Å–ª–∏ –Ω–µ —Å–¥–µ–ª–∞–ª–∏ —ç—Ç–æ –≤ –Ω–∞—á–∞–ª–µ:

```shell
‚ûú  example-nestjs git:(main) ‚úó  npm run start
```

–í —Å–ª—É—á–∞–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞, –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ—è–≤—è—Ç—Å—è —Ç–∞–∫–∏–µ –ª–æ–≥–∏:
```shell
‚ûú  example-nestjs git:(main) ‚úó  npm run start
> example-nesjs@0.0.1 start
> nest start

[Nest] 34430  - 03/29/2025, 7:19:13 PM     LOG [NestFactory] Starting Nest application...
[Nest] 34430  - 03/29/2025, 7:19:13 PM     LOG [InstanceLoader] AppModule dependencies initialized +6ms
[Nest] 34430  - 03/29/2025, 7:19:13 PM     LOG [InstanceLoader] StocksModule dependencies initialized +0ms
[Nest] 34430  - 03/29/2025, 7:19:13 PM     LOG [RoutesResolver] StocksController {/stocks}: +2ms
[Nest] 34430  - 03/29/2025, 7:19:13 PM     LOG [RouterExplorer] Mapped {/stocks, GET} route +2ms
[Nest] 34430  - 03/29/2025, 7:19:13 PM     LOG [RouterExplorer] Mapped {/stocks, POST} route +0ms
[Nest] 34430  - 03/29/2025, 7:19:13 PM     LOG [RouterExplorer] Mapped {/stocks/:id, GET} route +0ms
[Nest] 34430  - 03/29/2025, 7:19:13 PM     LOG [RouterExplorer] Mapped {/stocks/:id, PATCH} route +0ms
[Nest] 34430  - 03/29/2025, 7:19:13 PM     LOG [RouterExplorer] Mapped {/stocks/:id, DELETE} route +1ms
[Nest] 34430  - 03/29/2025, 7:19:13 PM     LOG [NestApplication] Nest application successfully started +0ms
```

–û–Ω–∏ –Ω–∞–≥–ª—è–¥–Ω—ã, –≤ –ø–µ—Ä–≤—ã—Ö —Å—Ç—Ä–æ—á–∫–∞—Ö –≥–æ–≤–æ—Ä–∏—Ç—Å—è –æ —Ç–æ–º, —á—Ç–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥—É–ª–µ–π —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª–∏—Å—å. –í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ç—Ä–æ—á–∫–∞—Ö –≥–æ–≤–æ—Ä–∏—Ç—Å—è –æ —Ç–æ–º, —á—Ç–æ `RouterExplorer` –æ–±—Ä–∞–±–æ—Ç–∞–ª —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ –æ–Ω–∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ.

–ï—Å–ª–∏ –≤–º–µ—Å—Ç–æ —Ç–∞–∫–æ–π –∫–∞—Ä—Ç–∏–Ω—ã —É –≤–∞—Å –∫–∞–∫–∏–µ-—Ç–æ –æ—à–∏–±–∫–∏, —Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–æ, –≤—ã –ø—Ä–æ–ø—É—Å—Ç–∏–ª–∏ –∫–∞–∫–æ–π-—Ç–æ —à–∞–≥ –∏–ª–∏ —Å–¥–µ–ª–∞–ª–∏ –æ–ø–µ—á–∞—Ç–∫—É. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫ –∏ –Ω–∞ —Ç–µ –æ—à–∏–±–∫–∏, –æ –∫–æ—Ç–æ—Ä—ã—Ö —Å–æ–æ–±—â–∞–µ—Ç IDE.

–ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤. –£–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—á–∞–ª–æ —É –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ - `http://localhost:3000`

`GET /stocks/`:

![Get All](images/get-all.png)

`POST /stocks`:

![Post](images/post.png)

–ï—Å–ª–∏ —Ç–µ–ø–µ—Ä—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å GET –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫, –º–æ–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–∞–º –±—É–¥–µ—Ç –∏ –Ω–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Ç–æ–∂–µ:

![Get with created](images/get-with-created.png)

`GET /stocks/:id`:

![Get by id](images/get-by-id.png)

`PATCH /stocks/:id`:

![Patch by id](images/patch-by-id.png)

–¢–µ–ø–µ—Ä—å –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å GET –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ –º–æ–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏–µ —É –∫–∞—Ä—Ç–æ—á–∫–∏ —Å id=2 –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–º–µ–Ω—è–ª–æ—Å—å:

![Get all after patch](images/get-all-after-patch.png)

`DELETE /stocks/:id`:

–£–¥–∞–ª–∏–º –Ω–æ–≤—É—é –∫–∞—Ä—Ç–æ—á–∫—É —Å id=5:

![Delete by id](images/delete-by-id.png)

–ü—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ –∫–∞—Ä—Ç–æ—á–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —É–¥–∞–ª–∏–ª–∞—Å—å:

![Get after delete by id](images/get-after-delete-by-id.png)

–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏–º, —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–∞—Ä—Ç–æ—á–∫–∏.

`GET /stocks?title=–ê–∫—Ü–∏—è 1`:

![Get with query](images/get-all-with-query.png)

–í –∫–∞—á–µ—Å—Ç–≤–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞–Ω–∏–π –º–æ–∂–Ω–æ –ø—Ä–∏–¥—É–º–∞—Ç—å:
- –¥–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
- –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ë–î –≤–º–µ—Å—Ç–æ —Ñ–∞–π–ª–∞


## 7. –ó–ê–î–ê–ù–ò–ï

1. –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ –≤–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã —Å 3-5 –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω—É—é —Ä–∞–±–æ—Ç—É –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫.
2. –£–¥–∞–ª–∏—Ç—å –≤—Å–µ `getData()` –∏ –∑–∞–º–µ–Ω–∏—Ç—å –∏—Ö –Ω–∞ –ø–æ—Ö–æ–¥—ã –≤ –Ω–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –≤–∞–º–∏ API.
3. –ù–∞–ø–∏—Å–∞—Ç—å –±—ç–∫–µ–Ω–¥ –Ω–∞ Node.js –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –¥–∞–Ω–Ω–æ–≥–æ, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (–∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–Ω—å—à–µ –ª–µ–∂–∞–ª–∏ –≤ `getData`) –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. 

## 8. –î–û–ü. –ó–ê–î–ê–ù–ò–ï

–î–ª—è —Å–∏–ª—å–Ω—ã—Ö —Ä–µ–±—è—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ–π BFF. 
–¢.–µ. –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å VK API –Ω–∞ –±—ç–∫–µ–Ω–¥, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∫–∞–∫ –±—ã –ø—Ä–æ—Å–ª–æ–π–∫–æ–π –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –∏ VK API.
–ß—Ç–æ–±—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, –Ω–∞–ø–∏—à–∏—Ç–µ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º @nathan_kith. –Ø –ø–æ–¥—Å–∫–∞–∂—É, –∫–∞–∫ —ç—Ç–æ –ª—É—á—à–µ —Å–¥–µ–ª–∞—Ç—å –∏ –¥–∞–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

–ß—Ç–æ –≤—ã –∑–∞ —ç—Ç–æ –ø–æ–ª—É—á–∏—Ç–µ? ~~–ü–æ–ª–µ–∑–Ω—ã–π –æ–ø—ã—Ç~~
–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ø–∞—Å—Ç—å –Ω–∞ —Å—Ç–∞–∂–∏—Ä–æ–≤–∫—É –≤ –Ø–Ω–¥–µ–∫—Å. –ü–∏—à–∏—Ç–µ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º (nathan_kith)!
